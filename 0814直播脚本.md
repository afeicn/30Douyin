# 0814直播脚本

## 直播主题
Trae七周实战训练营————第二课：数据存储原理介绍，给你的游戏加上排行榜！

## 直播内容
### 一、课程导引
#### 飞哥：
大家好，欢迎大家来到Trae七周实战训练营的第二节课，我是你们的老朋友沈飞。

#### 刘泓：
大家好，我是今天的主讲人刘泓。

#### 飞哥：
上节课我们给大家介绍了Vibe coding的概念，是“氛围编程”，让人可以忘记编程语言的存在，用自然语言进行编程。
然后，上节课的课后作业里有这样一道判断题：
 使用AI工具生成代码时，我们只需要简单描述需求，AI就能自动生成完整的可运行程序。
  A. 正确
  B. 错误
这道题的答案应该是“正确”，但是很多同学都选择了“错误”，泓老师觉得这道题的答案应该怎么理解？

#### 刘泓：
大家对于AI的理解还停留在辅助阶段，vibe coding就是可以生成完整的可运行程序，这也是我们不仅面向研发、而是面向全员去推荐Vibe Coding这种工作形式的原因。

#### 飞哥：
在Vibe Coding中，大家是不用写代码的，但是需要懂一些基本的原理，我们的课程就是为了帮大家补齐知识门槛。
相信通过上节课的实操作业大家也感受到了，给AI一句话，就能生成一个完整的可运行小游戏。
不过，上节课的小游戏还是纯前端的形式，没有办法存储游戏得分，这就导致游戏缺少了竞技性。“竞技感”的打造对游戏很重要，可以通过激发玩家的竞争动力与成就感​​，延长游戏的生命周期。
每个人都会想要“赢”和进步，那么怎么才能“快人一步”呢？除了要学好我们的AI课程，我们今天会给大家本期的小礼物——“keep双向髌骨带”，让大家能够跑得更快、更远。
老规矩，我们在直播中会不定时出3道抢答题，每轮答题中第一名回答正确的小伙伴将获得本期的小礼物。
此外直播互动值第一的小伙伴也将额外获得一件礼物，大家一定要多多参与互动。

### 二、知识点1:前后端分离

#### 飞哥：
那我们回到正题，上节课我们做完了一个小游戏的前端界面，但是无论得到什么分数，只要一刷新页面，分数就归零了。怎么才能让分数不消失呢？

#### 刘泓：
这就涉及到前后端分离这个技术概念。前端、后端这两个词或许比较抽象，我们先简单举例概括一下什么是前端，什么是后端。
我们继续上节课“饭店”这个例子，前台就相当于“点菜”，后台就相当于“做菜”。如果只在前台点菜、不记录，或者没有厨师做菜，那么点菜就没有用。

#### 飞哥：
所以​前端相当于“服务员、菜单、餐桌装饰”这些​​ ​​“看得见、摸得着”​​ 的部分，就像服务员，直接和顾客（用户）打交道。
​​后端相当于“厨房、厨师、仓库”​​这些 ​​“看不见但很重要”​​ 的部分，虽然顾客看不到，但没它餐厅的功能就运转不了。

#### 刘泓：
**🎬 1-展示厨房意象图**
对的，前后端协同作业的流程就像当你去餐厅吃饭时，通常会经历的这些步骤：
1. 服务员给你菜单，介绍菜品（前端）：菜单就相当于用户看到的漂亮页面；
2. 你点菜，服务员记录（数据传输）：点菜就相当于点击界面上的按钮，服务员记录就是处理用户请求，传输的订单就是计算数据；
3. 厨房根据订单做菜（后端）：厨师就相当于程序，冰箱、仓库就相当于数据库，不仅可以从里面拿菜，还可以往里面存菜；
4. 服务员把做好的菜端给你（数据返回）：后端把数据返回给前端，相当于服务员传菜，用户就可以看到菜了。

#### 飞哥：
为什么要把前端和后端分开，并且还用不同的代码实现呢？

#### 刘泓：
就好比服务员（前端）和厨师（后端）需要​​专注自己的活儿​​。服务员不能总跑进厨房盯着厨师炒菜，厨师也不能总跑出来招呼客人。分开部署，就是让它们有各自独立的工作空间，服务员不用关心后厨怎么做菜，后台提高自己的效率，服务员提升自己的服务体验，职责分明，互不干扰，效率更高。
采用这种方式，我们还能够独立地对前端或后端进行升级。只要信息传递的通路能够搭建好，那么前端与后端的升级就不会相互影响。
对非技术同学来说，记住这个​“​分工合作、各司其职”​​的核心思想就够了。随着你学习深入，会越来越体会到这种架构的妙处！

#### 飞哥：
**🎬 2-展示游戏前后台对比图**
在第一期的游戏中，我们只做了前台的部分，没有"厨房"。所以当你刷新页面时，就像服务员忘记了你刚才点了什么菜一样，分数就消失了。所以我们的游戏也需要这样一个“后端”厨房和仓库。

#### 刘泓：
对的，这样的话：
● 你的分数会被后台保存起来，每次进来都能看到之前的记录，这就是“后端”的作用。

#### 飞哥：
我们出一道选择题，看看大家听懂了没有？大家注意了，今天的题目都是多选题！
**🎬 3-展示抢答题1**
```
抢答题1： 前后端分离架构的优势包括哪些？（多选）
  A. 职责分明，前后端可以独立开发和升级
  B. 可以并行工作，提高开发效率
  C. 用户体验更好，数据可以实时更新
  D. 必须使用相同的技术栈才能工作
  答案：A、B、C
```

### 三、知识点2:后端与数据存储

#### 飞哥：
大家还记得我们上节课介绍的“前端三剑客”吗？前端常用的编程语言是HTML、CSS、JavaScript。那么后端的编程语言和前端语言有什么区别？

#### 刘泓：
后端是负责处理业务逻辑、数据管理和系统安全的“大脑”，后端的编程语言通常是服务器端的语言，如Java、Python、PHP等。这些语言主要用于处理业务逻辑、数据库操作、服务器配置等。

前端语言​​：在​​浏览器环境​​中运行，受限于Web标准，专注​​用户感知层​​（“如何展示”）。
​​后端语言​​：在​​服务器自由环境​​中运行，掌控系统资源，专注​​逻辑与数据层​​（“如何计算”）。

#### 飞哥：
说到后端我们一般会提到“数据库”，这两者之间的关系是什么？

#### 刘泓：
后端不等于存储，存储也不等于数据库，后端是负责处理业务逻辑，存储数据只是其中一部分，也可以只有缓存、计算。
数据存储的形式包括：
● 数据库
● 文件存储（可以存储在本地或云端）

#### 飞哥：
我们设计的小游戏应该用数据库还是文件存储？

#### 刘泓：
对于入门级的同学来说，数据库的概念可能比较抽象，所以我们先不介绍数据库，我们先用最简单的本地存储的方式，存储游戏的战绩数据，实现游戏中的排行榜功能。

这种方法的优点：
1. 简单易懂：就像记笔记一样直观
2. 无需额外软件：用我们已有的工具就能实现
3. 容易调试：可以直接打开文件查看内容
4. 成本低：不需要购买昂贵的数据库服务

当然也有局限性：
1. 人多时可能出错：很多人同时写笔记可能乱套
2. 数据量大时查找慢：笔记太多时翻找费时间
3. 安全性一般：笔记本如果丢了，数据就没了


#### 飞哥：
什么情况下应该使用数据库？

#### 刘泓：
**🎬 4-展示结构化数据示意图**
当需要存储更复杂的数据时就需要用到数据库。
数据库就像一个大仓库，用来存放软件运行所需的所有信息，可以存储​​结构化数据​​（数值、文本）、​​时序数据​​（登录记录）、​​二进制数据​​（贴图）、​​动态配置​​（JSON）等。

对于游戏来说，不仅可以存储玩家基本信息、游戏角色信息、管理角色拥有的装备/道具，还可以通过设计表结构，实现“玩家-角色-物品”的三级关联，这些我们之后的课上会展开讲。

#### 飞哥：
那我们用本地存储的方式存储排行榜，应该怎么做？

#### 刘泓：
本地存储，可理解为将软件运行所需数据存储在电脑的某个文件上，比如我们想记录游戏中每一次的成绩，我们就把这些数据记录在电脑的一个文件里，这就是实现了基本的数据本地存储，就像在笔记本上记笔记一样。
存储的格式可以用JSON，也可以用csv、txt等格式。

**🎬 5-展示JOSN文件示例**
我们用一种叫JSON的格式来记录数据，看起来像这样：
```json
[
  {"name": "小明", "score": 150, "time": "2023-05-01"},
  {"name": "小红", "score": 120, "time": "2023-05-01"}
]
```
每次有新分数时，就在这个"笔记本"里添加一行。要查看排行榜时，就翻看笔记本找出分数最高的几位玩家。
如此，当在前端输入命令时，它能通过通信渠道自动传递到后端。而后端依据前端传来的指令，调取自身所需信息（无论何种信息）。这个过程会采用一种特定的数据格式 ——JSON 进行相互通信。调取信息后，再将其传送回前端，这样就形成了一个完整的数据往来通路。


#### 飞哥：
看来使用JSON文件存储数据优缺点并存啊，我们出一道题考考大家！
**🎬 6-展示抢答题2**
```
抢答题2： 使用JSON文件存储数据的局限性有哪些？（多选）
  A. 人多时可能出错（并发问题）
  B. 数据量大时查找速度较慢
  C. 安全性一般，文件丢失会导致数据丢失
  D. 不支持JSON格式的数据读写
  答案：A、B、C
```

### 三、实操：AI生成后端系统并部署
#### 飞哥：
也就是说，我们现在需要建一个后端系统，通过程序调取存储在本地的游戏数据，实现排行榜功能。
大家不要听到编程就觉得自己是不是不行，在Vibe Coding时代，我们不用一行行手写代码，而是告诉AI我们想要什么效果，ai会自动规划实现的方式。
现在请泓老师给我们演示一下如何用Trae来实现这些功能！

#### 刘泓：
**🎬 7-展示prompt文本**
（切换到Trae工具界面）
我们只需要告诉AI：
```
帮我在贪吃蛇游戏里加个排行榜功能。

后端用Python写，不要用任何框架，用JSON文件保存分数数据。
前端要能显示排行榜，前三名有金银铜牌。
游戏结束时让玩家输入名字提交分数。
要能自动刷新排行榜。
```
（点击发送按钮，等待AI生成代码）

看！AI一下子就为我们生成了完整的解决方案！
（展示生成的代码简要说明）

#### 飞哥：
在这个过程中，AI都帮我们做了什么？

#### 刘泓：
1. 创建了"厨房"（后端服务）来保存分数
2. 升级了"服务员"（前端界面）来展示排行榜
3. 让它们能够互相通信


### 四、知识点3:跨域问题

#### 飞哥：
现在前后端代码都已经生成完成了，怎么实现两者之间的通信呢？

#### 刘泓：
在我们的游戏中：
● 游戏页面在"主街道"（端口80）
● 分数保存服务在"后巷"（端口8000）
● 浏览器认为这两个端口是两个地方，不让直接通信

#### 飞哥：
“端口”是什么？

#### 刘泓：
“端口”是浏览器访问服务器的一个数字，就好比是一个门牌号，它可以唯一标识一个应用程序。就像我们在小区里，每个房间都有一个门牌号，我们可以通过门牌号找到对应的房间。

#### 飞哥：
为什么不能让前端、后段存储在同一个“端口”，比如都用80端口？

#### 刘泓：
因为一个端口被一个程序独占了。

#### 飞哥：
不同的端口是怎么通信的？

#### 刘泓：
**🎬 8-展示跨域示意图**
因为浏览器的安全策略，不允许直接从一个域名的页面去请求另一个域名的资源。这就好比我们在小区里，不能直接从一个房间去请求另一个房间的资源。
因此，我们的前端程序和后端程序之间的通信就涉及到 “跨域” 概念。现在，我们需要借助Nginx这个工具，来解决这个问题。
Nginx就像这个快递公司：
● 它帮我们把请求从"主街道"转到"后巷"
● 用户只需要和"快递公司"打交道
● 不用关心后台具体在哪里

现在让我们把做好的应用部署上线！
上节课我们已经把前端页面部署在服务器上了，现在我们需要让后端服务在服务器运行。
（演示部署过程简要步骤）
部署步骤：
1. 把前端页面放到网站上
2. 让后端服务在服务器运行
3. 配置Nginx做"快递员"协调工作
4. 完成！全世界都能玩我们的排行榜游戏

这样就解决了跨域问题，我们的排行榜就能正常工作了！
看！现在我们可以：
1. 玩游戏
2. 结束时输入名字提交分数
3. 立即在排行榜看到自己的成绩
4. 刷新页面分数依然存在
5. 其他朋友也能看到同样的排行榜

#### 飞哥：
现在我们来出今天的最后一道题，大家抓紧了，最后一次获取礼物的机会了！
**🎬 9-展示抢答题3**
```
抢答题3： Nginx代理服务器的作用包括哪些？（多选）
  A. 解决跨域通信问题
  B. 协调前后端数据传输
  C. 自动生成前端代码
  D. 直接处理游戏逻辑
  答案：A、B
```

### 五、尾声
#### 飞哥：
今天的知识点很密集，请泓老师给我们简单总结一下！

#### 刘泓：
**🎬 10-展示知识点总结**
我们今天学了3个技术知识，以及用Vibe Coding的方式编写后端系统的实操。
1. 前后端分离：就像餐厅的服务员和厨房，各司其职
2. 数据的本地存储：用简单的文件方式保存用户数据
3. 跨域解决：用Nginx做"快递员"解决通信问题

#### 飞哥：
但是我们刚刚讲过，使用JSON文件存储数据还有很多缺点，比如人多时可能出错（并发问题）、数据量大时查找速度较慢、数据容易丢失，所以我们是不是应该进化一下？

#### 刘泓
没错，下期我们将学习更专业的数据存储方式————数据库，让我们的排行榜功能更加强大！

#### 飞哥：
那我们本期的课程就到这里了，从这节课开始，因为课程难度提升了，所以我们会在群里发布课后问卷，大家在实操过程中有什么疑问可以填写在问卷上，我们会在下一期给大家解答。

**🎬 11-展示课后作业说明**
本周的课后作业是：使用本地存储的形式，存储第一期的纯前端应用的数据。可以是游戏排行榜，也可以是任何你需要的数据，比如上一期有的同学做了一个AI学习平台，这一期就可以用本地存储的形式，存储用户的学习记录。

**🎬 12-展示积分榜**
最后我们揭晓今天的互动榜排行，第一名是xxx，将获得本期礼品一份。
记得完成我们的课后测验和作业，及时巩固自己的学习效果，下周同一时间我们不见不散！


### 练习题

**单选题**

 1. 第一期贪吃蛇游戏分数在刷新后消失的根本原因是什么？
  A. 网络连接不稳定
  B. 没有后端数据存储功能
  C. 前端代码存在bug
  D. 浏览器缓存问题
  答案：B

  2. 选择使用JSON文件存储数据的主要优点不包括以下哪一项？
  A. 简单易懂，像记笔记一样直观
  B. 无需额外软件，用已有工具就能实现
  C. 支持大量并发用户同时访问
  D. 容易调试，可以直接打开文件查看内容
  答案：C

  3. 直播中解决跨域问题采用的方案是什么？
  A. 使用WebSocket协议
  B. 配置CORS头部信息
  C. 使用Nginx作为代理服务器
  D. 将前后端部署在同一端口
  答案：C

  4.第一期贪吃蛇游戏属于哪种架构模式？
  A. 前后端分离架构
  B. 纯前端架构
  C. 纯后端架构
  D. 微服务架构
  答案：B
  
  **多选题**

  1. 前后端分离架构的优势包括哪些？
  A. 职责分明，前后端可以独立开发和升级
  B. 可以并行工作，提高开发效率
  C. 用户体验更好，数据可以实时更新
  D. 必须使用相同的技术栈才能工作
  答案：A、B、C

  2. 使用JSON文件存储数据的局限性有哪些？
  A. 人多时可能出错（并发问题）
  B. 数据量大时查找速度较慢
  C. 安全性一般，文件丢失会导致数据丢失
  D. 不支持JSON格式的数据读写
  答案：A、B、C

  3. Nginx代理服务器的作用包括哪些？
  A. 解决跨域通信问题
  B. 协调前后端数据传输
  C. 自动生成前端代码
  D. 直接处理游戏逻辑
  答案：A、B

  **判断题**

  1. 跨域问题是由于浏览器的同源策略安全机制导致的。
  A. 正确
  B. 错误
  答案：A

  2. 直播中提到的排行榜功能会自动刷新显示最新数据。
  A. 正确
  B. 错误
  答案：A

  3. 部署完成后，不同用户看到的排行榜数据是同步的。
  A. 正确
  B. 错误
  答案：A

